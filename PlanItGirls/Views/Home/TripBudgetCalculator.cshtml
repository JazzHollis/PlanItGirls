
@{
    ViewBag.Title = "TripBudgetCalculator";
}
@using PlanItGirls.Models;

<h2>Budget Calculator</h2>


Distance: @ViewBag.DistanceBetweenCities
<table class="table">
    <tr>
        <td>
            <form action="/Home/TripBudgetCalculator" method="get">
                Select Vehicle Type: <select name="VehicleSelection">
                    <option value="0">---</option>
                    <option value="1">Car</option>
                    <option value="2">Crossover</option>
                    <option value="3">Minivan</option>
                    <option value="4">Suv/Truck</option>
                </select>
                <input type="submit" value="MPG" />
            </form>
        </td>
    </tr>
</table>
<table>
    @if (ViewBag.GasPrice != null)
    {
        <tr>
            <th>Price Per Mile:</th>
            <td>$@ViewBag.GasPrice</td>
        </tr>
        <tr>
            <th>Miles between Cities:</th>
            <td>@ViewBag.DistanceBetweenCities</td>
        </tr>
        <tr>
            <th>Cost each way:</th>
            <td>@ViewBag.oneWayCost</td>
        </tr>
        <tr>
            <th>AdjustedBudget:</th>
            <td>@ViewBag.travelBudget</td>
        </tr>
    }

    else if (ViewBag.GasPrice is null)
    {
        <tr>
            <th>Aprox. gas mileage</th>
            <td>@ViewBag.SelectVehicle</td>
        </tr>
        <tr><td>Car: 29MPG ($.46 per mile)</td></tr>
        <tr><td>Crossover: 23MPG ($.59 per mile)</td></tr>
        <tr><td>Minivan: 19MPG ($.65 per mile)</td></tr>
        <tr><td>Suv/Truck: 16MPG ($.72 per mile)</td></tr>

    }
</table>

<table class="table">
    <tr>
        <th>Hotel Price Point</th>
        <td>
            <form action="../Home/TripBudgetCalculator" method="get">
                <select name="hotelPricePoint">
                    <option value="0">---</option>
                    <option value="1">$</option>
                    <option value="2">$$</option>
                    <option value="3">$$$</option>
                    <option value="4">$$$$</option>
                </select>
                <input type="submit" value="Price Range" />
            </form>
        </td>
        <td></td>
        <th>Remaining Budget:</th>
        <td>@ViewBag.travelBudget</td>
    </tr>
    @if (ViewBag.Hotels is null)
    {
        <tr>
            <th>Hotel Selection</th>
            <td>@ViewBag.Fact</td>
        </tr>
        <tr>
            <th>Approx. Hotel Costs</th>
            <td></td>
            <th>Remaining Budget:</th>
            <td>@ViewBag.travelBudget</td>
        </tr>
        <tr><td>$: $80 per night</td></tr>
        <tr><td>$$: $150 per night</td></tr>
        <tr><td>$$$: $225 per night</td></tr>
        <tr><td>$$$$: $350 per night</td></tr>
    }
    else
    {
        <tr>
            <td>
                <form action="../Home/TripBudgetCalculator" method="get">
                    <select name="HotelSelection">
                        @for (int i = 0; i < ViewBag.Hotels["businesses"].Count; i++)
                        {
                            <option value="@ViewBag.Hotels["businesses"][i]">@ViewBag.Hotels["businesses"][i]["name"]</option>
                        }
                    </select>
                    <input type="submit" value="Select Hotel" />
                </form>
            </td>
            @if (ViewBag.HotelSelection != null)
            {
                <td>
                    <img src="@ViewBag.HotelSelection["image_url"]" alt="Hotel Image" height="75" />
                </td>
                <td>
                    <form action="../Home/TripBudgetCalculator" method="get">
                        <select name="NumberOfNights">
                            @for (int i = 1; i <= @ViewBag.DayDiff; i++)
                            {
                                <option value="@i">@i</option>
                            }
                        </select>
                        <input type="submit" value="Number of Nights" />
                    </form>
                </td>
                <td></td>
                <th>Remaining Budget:</th>
                <td>@ViewBag.travelBudget</td>
            }
        </tr>
        <tr>
            <th>Price per Day</th>
            <td>$@ViewBag.PricePerDay</td>
        </tr>
        <tr>
            <th>Length of Stay</th>
            <td>@ViewBag.NumberOfNights</td>
        </tr>
        <tr>
            <th>Total Price of Stay</th>
            <td>$@ViewBag.TotalHotelBudget</td>
        </tr>
        <tr>
            <th>Adjusted Budget</th>
            <td>$@ViewBag.AdjustedTotalBudget</td>
        </tr>
    }
</table>
<form action="../Database/SaveHotelOption">
    @*<input type="submit" value="Save This Hotel" />*@
</form>
<table class="table">
    <tr>
        <th>Meal Selections</th>
        <td>
            <form action="../Home/TripBudgetCalculator" method="get">
                <select name="restaurantPricePoint">
                    <option value="0">---</option>
                    <option value="1">$</option>
                    <option value="2">$$</option>
                    <option value="3">$$$</option>
                    <option value="4">$$$$</option>
                </select>
                <input type="submit" value="Price Range" />
            </form>
        </td>
    </tr>
    @if (ViewBag.Restaurants is null)
    {
        <tr>
            <th>Meal Selection</th>
            <td>@ViewBag.Fact</td>
        </tr>
        <tr>
            <th>Approx. Meal Costs</th>
            <td></td>
            <th>Remaining Budget:</th>
            <td>@ViewBag.AdjustedTotalBudget</td>
        </tr>
        <tr><td>$: $10 per meal</td></tr>
        <tr><td>$$: $35 per meal</td></tr>
        <tr><td>$$$: $60 per meal</td></tr>
        <tr><td>$$$$: $100 per meal</td></tr>

    }
    else
    {
        <tr>
            <td>
                <form action="../Home/TripBudgetCalculator" method="get">
                    <select name="RestaurantSelection">
                        @for (int i = 0; i < ViewBag.Restaurants["businesses"].Count; i++)
                        {
                            <option value="@ViewBag.Restaurants["businesses"][i]">@ViewBag.Restaurants["businesses"][i]["name"]</option>
                        }
                    </select>
                    <input type="submit" value="Select Restaurant" />
                </form>
            </td>
            @if (ViewBag.RestaurantSelection != null)
            {
                <td>
                    <img src="@ViewBag.RestaurantSelection["image_url"]" alt="Restaurant Image" height="75" />
                </td>
                <td>
                    <form action="../Home/TripBudgetCalculator" method="get">
                        <select name="NumberOfMeals">
                            @for (int i = 1; i <= @ViewBag.DayDiff * 2; i++)
                            {
                                <option value="@i">@i</option>
                            }
                        </select>
                        <input type="submit" value="Number of Meals" />
                    </form>
                </td>
                <td></td>
                <th>Remaining Budget:</th>
                <td>@ViewBag.AdjustedTotalBudget</td>
            }
        </tr>
        <tr>
            <th>Price per Day</th>
            <td>$@ViewBag.PricePerMeal</td>
        </tr>
        <tr>
            <th>Length of Stay</th>
            <td>@ViewBag.NumberOfMeals</td>
        </tr>
        <tr>
            <th>Total Price of Stay</th>
            <td>$@ViewBag.TotalRestaurantBudget</td>
        </tr>
        <tr>
            <th>Adjusted Budget</th>
            <td>$@ViewBag.AdjustedRestaurantTotalBudget</td>
        </tr>
    }
</table>
<form action="../Database/SaveRestaurantOption">
    <input type="submit" value="Save This Restaurant" />
</form>

<form action="../TripSummary">
    <input type="submit" value="Trip Summary" />
</form>


